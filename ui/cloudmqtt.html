<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="/ui/mqttws31.js" type="text/javascript"></script>
	<script type="text/javascript">

  // Create a client instance
	  client = new Paho.MQTT.Client("m13.cloudmqtt.com", 34448,"web_" + parseInt(Math.random() * 100, 10)); 
	  //Example client = new Paho.MQTT.Client("m11.cloudmqtt.com", 32903, "web_" + parseInt(Math.random() * 100, 10));

	  // set callback handlers
	  client.onConnectionLost = onConnectionLost;
	  client.onMessageArrived = onMessageArrived;
	  var options = {
	    useSSL: true,
	    userName: "nogmsmyx",
	    password: "cRc2t6dZtU6j",
	    onSuccess:onConnect,
	    onFailure:doFail
	  }

	  // connect the client
	  client.connect(options);

	  // called when the client connects
	  function onConnect() {
	    // Once a connection has been made, make a subscription and send a message.
	    console.log("onConnect");
	    document.getElementById("tds").innerHTML = "Connected";
	    client.subscribe("/TDS");
	    //message = new Paho.MQTT.Message("Hello CloudMQTT");
	    //message.destinationName = "/TDS";
	    //client.send(message); 
	  }

	  function doFail(e){
	    console.log(e);
	  }

	  // called when the client loses its connection
	  function onConnectionLost(responseObject) {
	    if (responseObject.errorCode !== 0) {
	      console.log("onConnectionLost:"+responseObject.errorMessage);
	      document.getElementById("tds").innerHTML = "Connection Lost";
	    }
	  }

	  // called when a message arrives
	  function onMessageArrived(message) {
	    console.log("onMessageArrived:"+message.payloadString);
	    document.getElementById("tds").innerHTML = ""+message.payloadString;
	    document.getElementById("tag").innerHTML = "TDS";
	    if (message.payloadString=="Insert Probe")
	    {
	    	document.getElementById("tag").innerHTML = "";
	    }
	  }
	</script>


</head>
<body>
	<center>
	<div class="maindiv" style="height: '50%'; width: 100%;padding: 5px">
			<p style="text-align: center; font-family: Verdana; font-size: 45px">Smart Water Hardness Measuring System</p>
	</div>
	<div style="width: 100%; height: 50%">
		<p id="tds" style=" font-family: Verdana; font-size: 38px;">Connecting...</p>
		<p id="tag"></p>
	</div>
	</center>
</body>
</html>
